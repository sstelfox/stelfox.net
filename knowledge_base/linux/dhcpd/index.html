<!DOCTYPE html>
<html lang='en_US'>
  <head>
    <title>DHCPd - Stelfox Athen&#xe6;um</title>

    <meta http-equiv='content-type' content='text/html; charset=utf-8' />
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1' />
    
    

    <link rel="alternate" type="application/atom+xml" title="Stelfox Athen&#xe6;um Feed" href="/atom.xml" />
    <link rel="canonical" href="https://stelfox.net" />
    <link rel="author" href="https://plus.google.com/+SamStelfox31337/"/>

    <meta property="og:locale" content="en_US" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="DHCPd" />
    <meta property="og:url" content="https://stelfox.net/knowledge_base/linux/dhcpd/" />
    <meta property="og:site_name" content="Stelfox Athen&#xe6;um" />
    <meta property="article:publisher" content="https://www.facebook.com/sstelfox" />
    <meta property="og:image" content="https://stelfox.net/static/avatar-01.jpg" />

    <meta name="go-import" content="stelfox.net git https://io.stelfox.net/" />

    <link rel='stylesheet' href="//fonts.googleapis.com/css?family=Open+Sans:300,400italic,400,600,700|Alegreya+SC:700" />
    <link rel="stylesheet" href="https://stelfox.net/css/3HrCRVwL3Gos2V4HzXAw/Om/nxs=.css" />

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-32188490-1', 'stelfox.net');
      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script>
  </head>
  <body>
    <header class='masthead'>
      <div class='masthead-inner'>
        <h1><a href='/' title='Home'>Sam Stelfox</a></h1>
        <p class='lead'>Thoughts from a systems hacker and developer.</p>
        <nav>
          <ul>
            <li><a href="/about/" title="About">About</a></li>
            <li><a href="/blog/" title="Blog">Blog</a></li>
            <li><a href="/knowledge_base/" title="Knowledge Base">Knowledge Base</a></li>
            <li><form action="/search/" method="get"><input type="search" name="q" placeholder="Search" /></form></li>
          </ul>
        </nav>
        <footer class='colophon'>
          <p>&copy; 2014, All rights reserved.</p>
        </footer>
      </div>
    </header>
    <div class='content container'>
      <h1>DHCPd</h1>

<h2>Firewall Adjustments</h2>
<div class="CodeRay">
  <div class="code"><pre># Accept DHCP requests
-A INPUT -m udp -p udp --dport 67 --sport 68 -j ACCEPT
</pre></div>
</div>

<h2>Configuration</h2>

<h3>/etc/dhcp/dhcpd.conf</h3>
<div class="CodeRay">
  <div class="code"><pre># Default lease time information
min-lease-time 300;
max-lease-time 86400;
default-lease-time 86400;

# We are the only DHCP server there should be...
authoritative;

# No updates, might deal with this later
ddns-updates off;
ddns-update-style none;

# Security measures
ignore bootp;
ignore client-updates;
deny declines;
deny duplicates;

# Verify the address is unused before assigning
ping-check true;
ping-timeout 1;

# Logging information
log-facility local1;

# Default DNS servers
option domain-name-servers 8.8.8.8, 4.2.2.2;

# Room Mate's network
subnet 192.168.100.0 netmask 255.255.255.0 {
  option routers 192.168.100.1;
  option broadcast-address 192.168.100.255;

  range 192.168.100.50 192.168.100.250;

  # I don't monitor nor care about the devices my room mates
  # put on this subnet. Allow them all.
  allow unknown-clients;
}

# Public network
subnet 10.13.37.0 netmask 255.255.255.192 {
  option routers 10.13.37.1;
  option broadcast-address 10.13.37.63;

  range 10.13.37.10 10.13.37.40;

  # They probably won't be around long... no need to hold onto
  # resources they don't need
  max-lease-time 1800;
  default-lease-time 600;

  # I don't know who will get on this... besides I want to have
  # some fun with strangers...
  allow unknown-clients;
}

# Private/Trusted LAN
subnet 10.13.37.128 netmask 255.255.255.192 {
  option routers 10.13.37.129;
  option broadcast-address 10.13.37.191;

  option domain-name &quot;home.bedroomprogrammers.net&quot;;
  option ntp-servers 10.13.37.129;
  option time-offset -18000;

  range 10.13.37.140 10.13.37.170;

  deny unknown-clients;
}

# Include my known clients configurations
include &quot;/etc/dhcp/known-hosts.conf&quot;;
</pre></div>
</div>

<h3>/etc/dhcp/known-clients.conf</h3>

<p>This file needs to be created by hand. Initially it is empty, clients should be
added as needed.</p>
<div class="CodeRay">
  <div class="code"><pre>host caerleon {
    hardware ethernet 00:25:22:0d:6d:66;
    fixed-address 10.13.37.140;
}
</pre></div>
</div>

    </div>
  </body>
</html>
