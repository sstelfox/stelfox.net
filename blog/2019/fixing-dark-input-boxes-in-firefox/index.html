<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1><a href="https:&#x2F;&#x2F;stelfox.net&#x2F;blog&#x2F;2019&#x2F;fixing-dark-input-boxes-in-firefox&#x2F;">Fixing Dark Input Boxes in Firefox</a></h1>

  <div class="post-content"><p>I recently began trying out <a href="https://github.com/linuxmint/Cinnamon">Cinnamon</a> as my desktop environment and I've
been thoroughly enjoying it. The only issue I was having was occasionally a
page's form input fields would have a dark background while still having dark
text making it impossible to read, and very difficult to write.</p>
<span id="continue-reading"></span>
<p>It wasn't happening everywhere, and I couldn't track down what about a website
would cause the issue. Most prominently for me was when this showed up in AWS's
interface.</p>
<p><img src="https://stelfox.net/blog/2019/fixing-dark-input-boxes-in-firefox/dark_firefox_inputs.png" alt="Example of Dark Input in AWS Security Groups" /></p>
<p>Searching around apparently this was an issue with dark GTK themes and has been
a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=70315">known issue for about 18 years</a> and was re-reported again <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1283086">about 3 years
ago</a>. There have been a really bad workaround that people have suggested
including <a href="https://github.com/DmitriK/darkContrast#text-contrast-for-dark-themes">extensions</a>, <a href="https://stackoverflow.com/questions/19911090/firefox-how-to-see-text-in-input-fields-with-black-background-set-in-preference">custom user CSS</a>, and <a href="https://medium.com/@lsm/fix-firefox-dark-text-input-on-ubuntu-18-when-using-gnome-dark-themes-98f253f8ed7f">using desktop shortcuts
with environment variables</a>.</p>
<p>None of these work well, will be inconsistent based on how you open Firefox, or
might cause other issues with different websites. Generally I'm not a fan of
using random extensions for security, stability, and performance reasons.
Ultimately Mozilla hasn't fixed this issue, but there is a workable override at
this point.</p>
<p>To solve the issue we do need to override the GTK theme with a light one.
Generally people recommend <code>Adwaita</code> for the light theme that fixes it and it
seems to work well for me. You can check and make sure that the theme is
available by checking the <code>/usr/share/themes</code> directory on your system.</p>
<p>When you've confirmed the presence of the theme, open up Firefox and go to the
URL <code>about:config</code>. This override value doesn't exist by default so you'll need
to right click anywhere in that page and go to <code>New -&gt; String</code> in that context
menu. For the preference name enter <code>widget.content.gtk-theme-override</code> and for
the value enter <code>Adwaita</code>. After refreshing the effected pages the background
color issue should be resolved.</p>
<p>If you're making use of a <code>user.js</code> to enforce configuration options you can
add the following line to it address the issue:</p>
<pre><code>user_pref("widget.content.gtk-theme-override", "Adwaita");
</code></pre>
<p>A little side note in case someone comes looking for other options. There was
another <code>about:config</code> option that some Stack Overflow answers recommended
changing, <code>widget.content.allow-gtk-dark-theme</code>. The default is <code>false</code> and
they're recommending changing it to... <code>false</code>. It's not the answer to this
problem.</p>
<p>Hope this helps someone else out. Cheers!</p>
</div><p class="meta">Posted on <span class="postdate">2019-04-13</span></p></article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
