<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="I recently began trying out Cinnamon as my desktop environment and I've been thoroughly enjoying it. The only issue I was having was occasionally a page's form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.
It wasn't happening everywhere, and I couldn't track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS's interface."><meta name=keywords content="blog,programming,linux,systems,personal,rust,philosophy,linux,firefox,tips"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://stelfox.net/blog/2019/04/fixing-dark-input-boxes-in-firefox/><title>Fixing Dark Input Boxes in Firefox :: ./Sam_Stelfox.sh â€” A simple place for my collected thoughts and notes.
</title><link rel=stylesheet href=/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><meta itemprop=name content="Fixing Dark Input Boxes in Firefox"><meta itemprop=description content="I recently began trying out Cinnamon as my desktop environment and I've been thoroughly enjoying it. The only issue I was having was occasionally a page's form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.
It wasn't happening everywhere, and I couldn't track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS's interface."><meta itemprop=datePublished content="2019-04-13T11:53:22-04:00"><meta itemprop=dateModified content="2019-04-13T11:53:22-04:00"><meta itemprop=wordCount content="379"><meta itemprop=keywords content="Linux,Firefox,Tips"><meta name=twitter:card content="summary"><meta name=twitter:title content="Fixing Dark Input Boxes in Firefox"><meta name=twitter:description content="I recently began trying out Cinnamon as my desktop environment and I've been thoroughly enjoying it. The only issue I was having was occasionally a page's form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.
It wasn't happening everywhere, and I couldn't track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS's interface."><meta property="article:published_time" content="2019-04-13 11:53:22 -0400 EDT"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>./Sam_Stelfox.sh</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about/>About</a></li><li><a href=/notes/>Notes</a></li><li><a href=/blog/>Posts</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://stelfox.net/blog/2019/04/fixing-dark-input-boxes-in-firefox/>Fixing Dark Input Boxes in Firefox</a></h2><div class=post-content><p>I recently began trying out <a href=https://github.com/linuxmint/Cinnamon>Cinnamon</a> as my desktop environment and I've been thoroughly enjoying it. The only issue I was having was occasionally a page's form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.</p><p>It wasn't happening everywhere, and I couldn't track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS's interface.</p><p><img alt="Example of Dark Input in AWS Security Groups" src=/images/dark_firefox_inputs.png></p><p>Searching around apparently this was an issue with dark GTK themes and has been a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=70315">known issue for about 18 years</a> and was re-reported again <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1283086">about 3 years ago</a>. There have been a really bad workaround that people have suggested including <a href=https://github.com/DmitriK/darkContrast#text-contrast-for-dark-themes>extensions</a>, <a href=https://stackoverflow.com/questions/19911090/firefox-how-to-see-text-in-input-fields-with-black-background-set-in-preference>custom user CSS</a>, and <a href=https://medium.com/@lsm/fix-firefox-dark-text-input-on-ubuntu-18-when-using-gnome-dark-themes-98f253f8ed7f>using desktop shortcuts with environment variables</a>.</p><p>None of these work well, will be inconsistent based on how you open Firefox, or might cause other issues with different websites. Generally I'm not a fan of using random extensions for security, stability, and performance reasons. Ultimately Mozilla hasn't fixed this issue, but there is a workable override at this point.</p><p>To solve the issue we do need to override the GTK theme with a light one. Generally people recommend "Adwaita" for the light theme that fixes it and it seems to work well for me. You can check and make sure that the theme is available by checking the "/usr/share/themes" directory on your system.</p><p>When you've confirmed the presence of the theme, open up Firefox and go to the URL "about:config". This override value doesn't exist by default so you'll need to right click anywhere in that page and go to "New -> String" in that context menu. For the preference name enter "widget.content.gtk-theme-override" and for the value enter "Adwaita". After refreshing the effected pages the background color issue should be resolved.</p><p>If you're making use of a "user.js" to enforce configuration options you can add the following line to it address the issue:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-javascript data-lang=javascript><span class=line><span class=cl><span class=nx>user_pref</span><span class=p>(</span><span class=s2>&#34;widget.content.gtk-theme-override&#34;</span><span class=p>,</span> <span class=s2>&#34;Adwaita&#34;</span><span class=p>);</span>
</span></span></code></pre></td></tr></table></div></div><p>A little side note in case someone comes looking for other options. There was another "about:config" option that some Stack Overflow answers recommended changing, "widget.content.allow-gtk-dark-theme". The default is "false" and they're recommending changing it to... "false". It's not the answer to this
problem.</p><p>Hope this helps someone else out. Cheers!</p></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://stelfox.net/tags/linux/>linux</a></span>
<span class=tag><a href=https://stelfox.net/tags/firefox/>firefox</a></span>
<span class=tag><a href=https://stelfox.net/tags/tips/>tips</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=ac3c177eb78019063bdce225211b16f9e6b96848 target=_blank rel=noopener>ac3c177e</a> @ 2024-07-15</p></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>