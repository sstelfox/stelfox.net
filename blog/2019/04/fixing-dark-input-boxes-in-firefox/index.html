<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='I recently began trying out Cinnamon as my desktop environment and I&#39;ve been thoroughly enjoying it. The only issue I was having was occasionally a page&#39;s form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.
It wasn&#39;t happening everywhere, and I couldn&#39;t track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS&#39;s interface.'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Fixing Dark Input Boxes in Firefox • Sam Stelfox&#39;s Thoughts &amp; Notes'>
<meta property='og:description' content='I recently began trying out Cinnamon as my desktop environment and I&#39;ve been thoroughly enjoying it. The only issue I was having was occasionally a page&#39;s form input fields would have a dark background while still having dark text making it impossible to read, and very difficult to write.
It wasn&#39;t happening everywhere, and I couldn&#39;t track down what about a website would cause the issue. Most prominently for me was when this showed up in AWS&#39;s interface.'>
<meta property='og:url' content='https://stelfox.net/blog/2019/04/fixing-dark-input-boxes-in-firefox/'>
<meta property='og:site_name' content='Sam Stelfox&#39;s Thoughts &amp; Notes'>
<meta property='og:type' content='article'><meta property='article:section' content='blog'><meta property='article:tag' content='linux'><meta property='article:tag' content='firefox'><meta property='article:tag' content='tips'><meta property='article:published_time' content='2019-04-13T11:53:22-04:00'/><meta property='article:modified_time' content='2019-04-13T11:53:22-04:00'/><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.61.0-DEV" />

  <title>Fixing Dark Input Boxes in Firefox • Sam Stelfox&#39;s Thoughts &amp; Notes</title>
  <link rel='canonical' href='https://stelfox.net/blog/2019/04/fixing-dark-input-boxes-in-firefox/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-32188490-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>
<body class='page type-blog'>

  <div class='site'><a class='screen-reader-text' href='#content'>Skip to Content</a><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/about/'>About</a>
      </li><li class='item'>
        <a href='/blog/'>Blog Posts</a>
      </li><li class='item'>
        <a href='/notes/'>Various Notes</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Sam Stelfox&#39;s Thoughts &amp; Notes</p><p class='desc site-desc'>Thoughts from a software engineer, systems architect and Linux gubernāre.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Fixing Dark Input Boxes in Firefox</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2019-04-13T11:53:22-04:00'>2019, Apr 13</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
2 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p>I recently began trying out <a href="https://github.com/linuxmint/Cinnamon">Cinnamon</a> as my desktop environment and I've
been thoroughly enjoying it. The only issue I was having was occasionally a
page's form input fields would have a dark background while still having dark
text making it impossible to read, and very difficult to write.</p>
<p>It wasn't happening everywhere, and I couldn't track down what about a website
would cause the issue. Most prominently for me was when this showed up in AWS's
interface.</p>
<p><img src="/images/dark_firefox_inputs.png" alt="Example of Dark Input in AWS Security Groups"></p>
<p>Searching around apparently this was an issue with dark GTK themes and has been
a <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=70315">known issue for about 18 years</a> and was re-reported again <a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1283086">about 3 years
ago</a>. There have been a really bad workaround that people have suggested
including <a href="https://github.com/DmitriK/darkContrast#text-contrast-for-dark-themes">extensions</a>, <a href="https://stackoverflow.com/questions/19911090/firefox-how-to-see-text-in-input-fields-with-black-background-set-in-preference">custom user CSS</a>, and <a href="https://medium.com/@lsm/fix-firefox-dark-text-input-on-ubuntu-18-when-using-gnome-dark-themes-98f253f8ed7f">using desktop shortcuts
with environment variables</a>.</p>
<p>None of these work well, will be inconsistent based on how you open Firefox, or
might cause other issues with different websites. Generally I'm not a fan of
using random extensions for security, stability, and performance reasons.
Ultimately Mozilla hasn't fixed this issue, but there is a workable override at
this point.</p>
<p>To solve the issue we do need to override the GTK theme with a light one.
Generally people recommend <code>Adwaita</code> for the light theme that fixes it and it
seems to work well for me. You can check and make sure that the theme is
available by checking the <code>/usr/share/themes</code> directory on your system.</p>
<p>When you've confirmed the presence of the theme, open up Firefox and go to the
URL <code>about:config</code>. This override value doesn't exist by default so you'll need
to right click anywhere in that page and go to <code>New -&gt; String</code> in that context
menu. For the preference name enter <code>widget.content.gtk-theme-override</code> and for
the value enter <code>Adwaita</code>. After refreshing the effected pages the background
color issue should be resolved.</p>
<p>If you're making use of a <code>user.js</code> to enforce configuration options you can
add the following line to it address the issue:</p>
<pre><code>user_pref(&quot;widget.content.gtk-theme-override&quot;, &quot;Adwaita&quot;);
</code></pre><p>A little side note in case someone comes looking for other options. There was
another <code>about:config</code> option that some Stack Overflow answers recommended
changing, <code>widget.content.allow-gtk-dark-theme</code>. The default is <code>false</code> and
they're recommending changing it to&hellip; <code>false</code>. It's not the answer to this
problem.</p>
<p>Hope this helps someone else out. Cheers!</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/tags/linux/'>linux</a>, <a class='tag' href='/tags/firefox/'>firefox</a>, <a class='tag' href='/tags/tips/'>tips</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blog/2019/03/merging-overlapping-subnets/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Merging Overlapping Subnets</a>
    </div><div class='next-entry sep-before'>
      <a href='/blog/2019/10/fixing-hung-nginx-workers/'>
        <span class='screen-reader-text'>Next post: </span>Fixing Hung Nginx Workers<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p> &copy; 2011-2020 Sam Stelfox </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script>

</body>

</html>

