<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="ie=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="author" content="sam@stelfox.net Sam Stelfox ">
<meta name="description" content="While running an aide check on one of my servers after updating it, I started seeing a large number of very concerning warning messages:
/usr/sbin/prelink: /bin/mailx: at least one of file&amp;#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /bin/rpm: at least one of file&amp;#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /sbin/readahead: at least one of file&amp;#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /lib64/libkrb5." />
<meta name="keywords" content="blog, programming, linux, systems, personal, linux" />
<meta name="robots" content="noodp" />
<meta name="theme-color" content="" />
<link rel="canonical" href="https://stelfox.net/blog/2014/08/dependency-prelink-issues/" />


    <title>
        
            Dependency Prelink Issues :: Sam Stelfox 
        
    </title>




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.5.0/css/flag-icon.min.css" integrity="sha512-Cv93isQdFwaKBV+Z4X8kaVBYWHST58Xb/jVOcV9aRsGSArZsgAnFIhMpDoMDcFNoUtday1hdjn0nGp3+KZyyFw==" crossorigin="anonymous" referrerpolicy="no-referrer" />



<link rel="stylesheet" href="/main.2a064c455b0ecbd6b1481b3bf9df2441e95838691022f40a5338c2cb1244f075.css" integrity="sha256-KgZMRVsOy9axSBs7&#43;d8kQelYOGkQIvQKUzjCyxJE8HU=">



    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="mask-icon" href="/safari-pinned-tab.svg" color="">
    <link rel="shortcut icon" href="/favicon.ico">
    <meta name="msapplication-TileColor" content="">


<meta itemprop="name" content="Dependency Prelink Issues">
<meta itemprop="description" content="While running an aide check on one of my servers after updating it, I started seeing a large number of very concerning warning messages:
/usr/sbin/prelink: /bin/mailx: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /bin/rpm: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /sbin/readahead: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /lib64/libkrb5."><meta itemprop="datePublished" content="2014-08-12T16:16:14-04:00" />
<meta itemprop="dateModified" content="2014-08-12T16:16:14-04:00" />
<meta itemprop="wordCount" content="334">
<meta itemprop="keywords" content="linux," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Dependency Prelink Issues"/>
<meta name="twitter:description" content="While running an aide check on one of my servers after updating it, I started seeing a large number of very concerning warning messages:
/usr/sbin/prelink: /bin/mailx: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /bin/rpm: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /sbin/readahead: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /lib64/libkrb5."/>



    <meta property="og:title" content="Dependency Prelink Issues" />
<meta property="og:description" content="While running an aide check on one of my servers after updating it, I started seeing a large number of very concerning warning messages:
/usr/sbin/prelink: /bin/mailx: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /bin/rpm: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /sbin/readahead: at least one of file&#39;s dependencies has changed since prelinking Error on exit of prelink child process /usr/sbin/prelink: /lib64/libkrb5." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://stelfox.net/blog/2014/08/dependency-prelink-issues/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2014-08-12T16:16:14-04:00" />
<meta property="article:modified_time" content="2014-08-12T16:16:14-04:00" />






    <meta property="article:published_time" content="2014-08-12 16:16:14 -0400 EDT" />










    </head>

    
        <body>
    
    
        <div class="container">
            <header class="header">
    <span class="header__inner">
        <a href="/" style="text-decoration: none;">
    <div class="logo">
        
            <span class="logo__mark">></span>
            <span class="logo__text ">
                ./Sam_Stelfox.sh</span>
            <span class="logo__cursor" style=
                  "
                   
                   ">
            </span>
        
    </div>
</a>


        <span class="header__right">
            
                <nav class="menu">
    <ul class="menu__inner"><li><a href="/about/">About</a></li><li><a href="/blog/">Blog Posts</a></li><li><a href="/notes/">Various Notes</a></li>
    </ul>
</nav>

                <span class="menu-trigger">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M0 0h24v24H0z" fill="none"/>
                        <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
                    </svg>
                </span>
            
        </span>
    </span>
</header>


            <div class="content">
                
    <main class="post">

        <div class="post-info">
            
            </p>
        </div>

        <article>
            <h2 class="post-title"><a href="https://stelfox.net/blog/2014/08/dependency-prelink-issues/">Dependency Prelink Issues</a></h2>

            
            
            

            <div class="post-content">
                <p>While running an aide check on one of my servers after updating it, I started
seeing a large number of very concerning warning messages:</p>
<div class="highlight"><pre tabindex="0" style="color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>/usr/sbin/prelink: /bin/mailx: at least one of file&#39;s dependencies has changed since prelinking
</span></span><span style="display:flex;"><span>Error on exit of prelink child process
</span></span><span style="display:flex;"><span>/usr/sbin/prelink: /bin/rpm: at least one of file&#39;s dependencies has changed since prelinking
</span></span><span style="display:flex;"><span>Error on exit of prelink child process
</span></span><span style="display:flex;"><span>/usr/sbin/prelink: /sbin/readahead: at least one of file&#39;s dependencies has changed since prelinking
</span></span><span style="display:flex;"><span>Error on exit of prelink child process
</span></span><span style="display:flex;"><span>/usr/sbin/prelink: /lib64/libkrb5.so.3.3: at least one of file&#39;s dependencies has changed since prelinking
</span></span><span style="display:flex;"><span>Error on exit of prelink child process
</span></span><span style="display:flex;"><span>/usr/sbin/prelink: /lib64/libgssapi_krb5.so.2.2: at least one of file&#39;s dependencies has changed since prelinking
</span></span></code></pre></div><p>The list went on with maybe a total of forty packages and libraries. My initial
reaction was &lsquo;Did I get hacked?&rsquo;. Before running the updates I ran an aide
verification check which returned no issues and the files that were now
displaying the issue were in the packages that got updated.</p>
<p>What was the next worse scenario? The packages had been tampered with and I
just installed malicious files. This didn&rsquo;t seem likely as the packages are all
signed with GPG and an aide check would have caught tampering with my trust
database, the <code>gpg</code> binary, or the aide binary. Still a key could have been
compromised.</p>
<p>After some Googling I came across people with similar issues, (including one
annoyingly paywalled Red Hat article on the issue). Several people simply ended
the conversation on the assumption the user with the issue had been hacked.
Finally I <a href="http://lists.centos.org/pipermail/centos/2007-December/049222.html">came across one helpful individual</a> with the fix. The binaries
just need to have their prelink cache updated again. This can be accomplished
with the following command on CentOS 6.5 (probably the same on others).</p>
<div class="highlight"><pre tabindex="0" style="color:#c9d1d9;background-color:#0d1117;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-fallback" data-lang="fallback"><span style="display:flex;"><span>/usr/sbin/prelink -av -mR
</span></span></code></pre></div><p><em>Update:</em> Ultimately I decided to follow <a href="https://stelfox.net/notes/linux-hardening/">my own advice</a> (search for
prelink) and just simply disabled prelinking too prevent it from interferring
with aide checks and causing other weird issues. The memory trade-off isn&rsquo;t
valuable enough for me.</p>

            </div>
        </article>

        <hr />

        <div class="post-info">
            
    <p>
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7" y2="7"></line></svg>

        <span class="tag"><a href="https://stelfox.net/tags/linux/">linux</a></span>
        
    </p>

            
  		</div>
    </main>

            </div>

            
                <footer class="footer">
    
    
</footer>

            
        </div>

        



<script type="text/javascript" src="/bundle.min.c90b8161416b87c69a8e02683b54ddd6edb90aea699648bf655e6cbc45b419b8e465d196e715772463dba35a6faf5decb2eb247480d38680484d54645b434570.js" integrity="sha512-yQuBYUFrh8aajgJoO1Td1u25Cupplki/ZV5svEW0GbjkZdGW5xV3JGPbo1pvr13ssuskdIDThoBITVRkW0NFcA=="></script>



    </body>
</html>
