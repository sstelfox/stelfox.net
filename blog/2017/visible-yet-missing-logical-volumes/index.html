<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1><a href="https:&#x2F;&#x2F;stelfox.net&#x2F;blog&#x2F;2017&#x2F;visible-yet-missing-logical-volumes&#x2F;">Visible Yet Missing Logical Volumes</a></h1>

  <div class="post-content"><p>While working on an automated install script for an embedded board, I hit an
issue with the logical volumes never showing up in <code>/dev/mapper</code>, and in turn
unable to be mounted. This left me in the dracut emergency shell (after about
three minutes), with little to go on beyond the following error:</p>
<span id="continue-reading"></span><pre><code>[187.508531] dracut Warning: Could not boot.
[187.510560] dracut Warning: /dev/disk/by-uuid/5681-902D does not exist
[187.512534] dracut Warning: /dev/mapper/system-root does not exit
[187.513990] dracut Warning: /dev/system/root does not exist
</code></pre>
<p>After booting into a live CD I checked to make sure the volume group showed up
under <code>pvscan</code> like so:</p>
<pre><code>livecd ~ # pvscan
  PV /dev/mmcblk0p3   VG system     lvm2 [19.50 GiB / 0    free]
  Total: 1 [19.50 GiB] / in use: 1 [19.50 GiB] / in no VG: 0 [0   ]
</code></pre>
<p>And the logical volumes were also showing up with <code>lvscan</code>:</p>
<pre><code>livecd ~ # lvscan
  inactive          '/dev/system/root' [18.45 GiB] inherit
  inactive          '/dev/system/swap' [1.05 GiB] inherit
</code></pre>
<p>Notice that they are both marked inactive? That's our issue. To fix it we can
mark all logical volumes under our volume group as active (replace <code>system</code>
with your volume group name):</p>
<pre><code>vgchange --activate y system
</code></pre>
<p>This didn't fix the LVM volumes showing up at boot but it did allow me to get
back into my root filesystem as a chroot so I could investigate the issue which
I've finished documenting in <a href="https://stelfox.net/blog/2017/investigating-lvm-from-dracut/">another post</a>.</p>
</div><p class="meta">Posted on <span class="postdate">2017-10-24</span></p></article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
