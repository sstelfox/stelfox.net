<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Normally handling HTTP responses in Ruby is rather straight forward. There is a native library in Ruby that handles HTTP requests which parses the responses into a neat data structure that you can then operate on. What if you want to work on stored HTTP responses outside of a connection though? This was the situation I found myself in and thanks to a series of unusual decisions in the Ruby core library I found myself left out in the cold."><meta name=keywords content="blog,programming,linux,systems,personal,rust,philosophy,ruby,tips"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://stelfox.net/blog/2018/05/parsing-http-responses-in-ruby/><title>Parsing HTTP Responses in Ruby :: ./Sam_Stelfox.sh â€” A simple place for my collected thoughts and notes.
</title><link rel=stylesheet href=/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><meta itemprop=name content="Parsing HTTP Responses in Ruby"><meta itemprop=description content="Normally handling HTTP responses in Ruby is rather straight forward. There is a native library in Ruby that handles HTTP requests which parses the responses into a neat data structure that you can then operate on. What if you want to work on stored HTTP responses outside of a connection though? This was the situation I found myself in and thanks to a series of unusual decisions in the Ruby core library I found myself left out in the cold."><meta itemprop=datePublished content="2018-05-23T07:53:19-06:00"><meta itemprop=dateModified content="2018-05-23T07:53:19-06:00"><meta itemprop=wordCount content="967"><meta itemprop=keywords content="Ruby,Tips"><meta name=twitter:card content="summary"><meta name=twitter:title content="Parsing HTTP Responses in Ruby"><meta name=twitter:description content="Normally handling HTTP responses in Ruby is rather straight forward. There is a native library in Ruby that handles HTTP requests which parses the responses into a neat data structure that you can then operate on. What if you want to work on stored HTTP responses outside of a connection though? This was the situation I found myself in and thanks to a series of unusual decisions in the Ruby core library I found myself left out in the cold."><meta property="article:published_time" content="2018-05-23 07:53:19 -0600 -0600"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>./Sam_Stelfox.sh</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about/>About</a></li><li><a href=/notes/>Notes</a></li><li><a href=/blog/>Posts</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://stelfox.net/blog/2018/05/parsing-http-responses-in-ruby/>Parsing HTTP Responses in Ruby</a></h2><div class=post-content><p>Normally handling HTTP responses in Ruby is rather straight forward. There is a native library in Ruby that handles HTTP requests which parses the responses into a neat data structure that you can then operate on. What if you want to work on stored HTTP responses outside of a connection though? This was the situation I found myself in and thanks to a series of unusual decisions in the Ruby core library I found myself left out in the cold.</p><p>For reference this is in the latest stable Ruby as of this writing (2.5.1).</p><p>Let's start with a very small HTTP response stored in a variable for us to test on:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-0-1><a class=lnlinks href=#hl-0-1> 1</a>
</span><span class=lnt id=hl-0-2><a class=lnlinks href=#hl-0-2> 2</a>
</span><span class=lnt id=hl-0-3><a class=lnlinks href=#hl-0-3> 3</a>
</span><span class=lnt id=hl-0-4><a class=lnlinks href=#hl-0-4> 4</a>
</span><span class=lnt id=hl-0-5><a class=lnlinks href=#hl-0-5> 5</a>
</span><span class=lnt id=hl-0-6><a class=lnlinks href=#hl-0-6> 6</a>
</span><span class=lnt id=hl-0-7><a class=lnlinks href=#hl-0-7> 7</a>
</span><span class=lnt id=hl-0-8><a class=lnlinks href=#hl-0-8> 8</a>
</span><span class=lnt id=hl-0-9><a class=lnlinks href=#hl-0-9> 9</a>
</span><span class=lnt id=hl-0-10><a class=lnlinks href=#hl-0-10>10</a>
</span><span class=lnt id=hl-0-11><a class=lnlinks href=#hl-0-11>11</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>raw_http_body</span> <span class=o>=</span> <span class=s>&lt;&lt;-BODY.rstrip
</span></span></span><span class=line><span class=cl><span class=s></span><span class=no>Just</span> <span class=n>the</span> <span class=n>body</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=no>BODY</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>raw_http_response</span> <span class=o>=</span> <span class=s>&lt;&lt;-RESP.rstrip
</span></span></span><span class=line><span class=cl><span class=s></span><span class=no>HTTP</span><span class=o>/</span><span class=mi>1</span><span class=o>.</span><span class=mi>1</span> <span class=mi>200</span> <span class=no>Ok</span><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=ss>Connection</span><span class=p>:</span> <span class=n>close</span><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=no>Content</span><span class=o>-</span><span class=ss>Length</span><span class=p>:</span> <span class=c1>#{raw_http_body.bytesize}\r</span>
</span></span><span class=line><span class=cl><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=c1>#{raw_http_body}</span>
</span></span><span class=line><span class=cl><span class=no>RESP</span>
</span></span></code></pre></td></tr></table></div></div><p>The above is a little bit weird but is a minimum reasonable HTTP response. All lines are approprietly terminated with both a carriage return (explicit) and
a newline (implicit in how the strings are defined). The "Content-Length"
header is the exact number of bytes present in the body (thus the two "#rstrip"
calls). The "Date" header was omitted due to this line in <a href=https://tools.ietf.org/html/rfc7231#section-7.1.1.2>RFC7231</a></p><blockquote><p>An origin server MUST NOT send a Date header field if it does not have a clock capable of providing a reasonable approximation of the current instance in Coordinated Universal Time.</p></blockquote><p>...Which the content of this static site does not have.</p><p>With our minimal response out of the way how do we go about parsing it? The
<a href=https://ruby-doc.org/stdlib-2.5.1/libdoc/net/http/rdoc/Net/HTTPResponse.html>Ruby 2.5.1 stdlib documentation</a> doesn't specify how it can be created by end users which usually means it isn't intended for use by users of the language directly and digging through the Ruby source, you'll see this is precisely the case. Which means <em><strong>Ruby does not have a HTTP response parser available in it's standard library</strong></em>. This is pretty frustrating, but maybe it can be worked around.</p><p>How does the "Net::HTTP" library make use of it? Even if the methods aren't listed for public documentation they're still public APIs on the class and should be able to be used without monkey patching right? The response is setup in <a href=https://github.com/ruby/ruby/blob/v2_5_1/lib/net/http.rb#L958>the connect method of Net::HTTP</a> and it comes down to a few relevant lines that can be summarized as:</p><ol><li>Open a socket to the web server</li><li>Write the formatted request to the socket</li><li>Pass the socket to "HTTPResponse#read_new"</li></ol><p>So we need a socket like object containing our response, which we can do with "StringIO" and pass it to the appropriate method. Let's see what happens:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-1-1><a class=lnlinks href=#hl-1-1>1</a>
</span><span class=lnt id=hl-1-2><a class=lnlinks href=#hl-1-2>2</a>
</span><span class=lnt id=hl-1-3><a class=lnlinks href=#hl-1-3>3</a>
</span><span class=lnt id=hl-1-4><a class=lnlinks href=#hl-1-4>4</a>
</span><span class=lnt id=hl-1-5><a class=lnlinks href=#hl-1-5>5</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;net/http&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;stringio&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>resp_io</span> <span class=o>=</span> <span class=no>StringIO</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>raw_http_response</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=no>Net</span><span class=o>::</span><span class=no>HTTPResponse</span><span class=o>.</span><span class=n>read_new</span><span class=p>(</span><span class=n>resp_io</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>We get a raised exception:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-2-1><a class=lnlinks href=#hl-2-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>Net::HTTPBadResponse: wrong status line: &#34;HTTP/1.1 200 Ok\r\n&#34;
</span></span></code></pre></td></tr></table></div></div><p>That is definitely a valid status line, so what is going on here? Back to Ruby's source code... "Net::HTTPResponse#read_new" starts off by calling "Net::HTTPResponse#read_status_line" which uses this regex for extracting and checking the validity of the status line:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-3-1><a class=lnlinks href=#hl-3-1>1</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=sr>/\AHTTP(?:\/(\d+\.\d+))?\s+(\d\d\d)(?:\s+(.*))?\z/in</span>
</span></span></code></pre></td></tr></table></div></div><p>I had never seen the "/n" modifier for Ruby's regular expressions and it seems to be completely undocumented. This turned out to be a red herring as it simply sets <code>Regexp::NOENCODING</code> (had to dig into the <a href=https://github.com/ruby/ruby/blob/3527c05a8f4e189772cdac17f166bd9626c24661/spec/ruby/core/regexp/options_spec.rb>spec/ruby/core/regexp/options_spec.rb</a> file to figure that one out).</p><p>So why isn't that regular expression matching? Spoiler: It's the newline (the carriage return is fine). That is a violation of the HTTP spec, but it is working normally for Ruby's HTTP requests so what gives? Apparently we have to go deeper...</p><p>It's getting the header string by calling <code>#readline</code> which on standard <a href=http://ruby-doc.org/core-2.5.1/IO.html#method-i-readline>IO</a> objects returns the newline (The <code>IO</code> class if the base for <code>StringIO</code>, and <code>Socket</code> objects in addition to many others). In <a href=https://blog.bigbinary.com/2017/03/07/io-readlines-now-accepts-chomp-flag-as-an-argument.html>Ruby 2.4</a> and later there is a chomp flag that changes this behavior but it isn't being used in this case, and it would take the carriage return with it if it was.</p><p>So... We must not be operating on an actual <code>IO</code> subclass... And sure enough, <code>Net::HTTP#connect</code> after getting the raw socket wraps it in a <code>Net::BufferedIO</code> object which is another internal hidden class. You can see the definition <a href=https://github.com/ruby/ruby/blob/v2_5_1/lib/net/protocol.rb#L81>of it here</a> and here is its <code>#readline</code> method:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-4-1><a class=lnlinks href=#hl-4-1>1</a>
</span><span class=lnt id=hl-4-2><a class=lnlinks href=#hl-4-2>2</a>
</span><span class=lnt id=hl-4-3><a class=lnlinks href=#hl-4-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=k>def</span> <span class=nf>readline</span>
</span></span><span class=line><span class=cl>  <span class=n>readuntil</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>)</span><span class=o>.</span><span class=n>chop</span>
</span></span><span class=line><span class=cl><span class=k>end</span>
</span></span></code></pre></td></tr></table></div></div><p>Yep, for some reason this one private internal API has decided to complicate a Ruby standard API convention and strip off the trailing carriage return and new line. Wrapping our <code>StringIO</code> object in a <code>BufferedIO</code> object does solve this problem but there is no reason for these complications...</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-5-1><a class=lnlinks href=#hl-5-1>1</a>
</span><span class=lnt id=hl-5-2><a class=lnlinks href=#hl-5-2>2</a>
</span><span class=lnt id=hl-5-3><a class=lnlinks href=#hl-5-3>3</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>resp_io</span> <span class=o>=</span> <span class=no>StringIO</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>raw_http_response</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>buf_io</span> <span class=o>=</span> <span class=no>Net</span><span class=o>::</span><span class=no>BufferedIO</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>resp_io</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=no>Net</span><span class=o>::</span><span class=no>HTTPResponse</span><span class=o>.</span><span class=n>read_new</span><span class=p>(</span><span class=n>buf_io</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Or does it?</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-6-1><a class=lnlinks href=#hl-6-1>1</a>
</span><span class=lnt id=hl-6-2><a class=lnlinks href=#hl-6-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>body</span>
</span></span><span class=line><span class=cl><span class=c1># NoMethodError: undefined method `closed?&#39; for nil:NilClass</span>
</span></span></code></pre></td></tr></table></div></div><p>We need to pull one more trick from the <code>Net::HTTP#transport_request</code> to get the body. The first line actually returns the body, but we want to treat this like a normal <code>HTTPResponse</code> so we want to make sure the <code>#body</code> method works:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-7-1><a class=lnlinks href=#hl-7-1>1</a>
</span><span class=lnt id=hl-7-2><a class=lnlinks href=#hl-7-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>reading_body</span><span class=p>(</span><span class=n>buf_io</span><span class=p>,</span> <span class=kp>true</span><span class=p>)</span> <span class=p>{</span> <span class=k>yield</span> <span class=n>res</span> <span class=k>if</span> <span class=nb>block_given?</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>body</span>
</span></span></code></pre></td></tr></table></div></div><p>There are a couple of differences still from a normal response body. The only one of particular note to me is that normally the response get it's <code>#uri</code> data from the request. This isn't available with the response alone but can be set pretty easily:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-8-1><a class=lnlinks href=#hl-8-1>1</a>
</span><span class=lnt id=hl-8-2><a class=lnlinks href=#hl-8-2>2</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;uri&#39;</span>
</span></span><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>uri</span> <span class=o>=</span> <span class=no>URI</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=s1>&#39;http://example.tld&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>Altogether this is what it looks like:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt id=hl-9-1><a class=lnlinks href=#hl-9-1> 1</a>
</span><span class=lnt id=hl-9-2><a class=lnlinks href=#hl-9-2> 2</a>
</span><span class=lnt id=hl-9-3><a class=lnlinks href=#hl-9-3> 3</a>
</span><span class=lnt id=hl-9-4><a class=lnlinks href=#hl-9-4> 4</a>
</span><span class=lnt id=hl-9-5><a class=lnlinks href=#hl-9-5> 5</a>
</span><span class=lnt id=hl-9-6><a class=lnlinks href=#hl-9-6> 6</a>
</span><span class=lnt id=hl-9-7><a class=lnlinks href=#hl-9-7> 7</a>
</span><span class=lnt id=hl-9-8><a class=lnlinks href=#hl-9-8> 8</a>
</span><span class=lnt id=hl-9-9><a class=lnlinks href=#hl-9-9> 9</a>
</span><span class=lnt id=hl-9-10><a class=lnlinks href=#hl-9-10>10</a>
</span><span class=lnt id=hl-9-11><a class=lnlinks href=#hl-9-11>11</a>
</span><span class=lnt id=hl-9-12><a class=lnlinks href=#hl-9-12>12</a>
</span><span class=lnt id=hl-9-13><a class=lnlinks href=#hl-9-13>13</a>
</span><span class=lnt id=hl-9-14><a class=lnlinks href=#hl-9-14>14</a>
</span><span class=lnt id=hl-9-15><a class=lnlinks href=#hl-9-15>15</a>
</span><span class=lnt id=hl-9-16><a class=lnlinks href=#hl-9-16>16</a>
</span><span class=lnt id=hl-9-17><a class=lnlinks href=#hl-9-17>17</a>
</span><span class=lnt id=hl-9-18><a class=lnlinks href=#hl-9-18>18</a>
</span><span class=lnt id=hl-9-19><a class=lnlinks href=#hl-9-19>19</a>
</span><span class=lnt id=hl-9-20><a class=lnlinks href=#hl-9-20>20</a>
</span><span class=lnt id=hl-9-21><a class=lnlinks href=#hl-9-21>21</a>
</span><span class=lnt id=hl-9-22><a class=lnlinks href=#hl-9-22>22</a>
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-ruby data-lang=ruby><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;net/http&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;stringio&#39;</span>
</span></span><span class=line><span class=cl><span class=nb>require</span> <span class=s1>&#39;uri&#39;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>raw_http_body</span> <span class=o>=</span> <span class=s>&lt;&lt;-BODY.rstrip
</span></span></span><span class=line><span class=cl><span class=s></span><span class=no>Just</span> <span class=n>the</span> <span class=n>body</span><span class=o>...</span>
</span></span><span class=line><span class=cl><span class=no>BODY</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>raw_http_response</span> <span class=o>=</span> <span class=s>&lt;&lt;-RESP.rstrip
</span></span></span><span class=line><span class=cl><span class=s></span><span class=no>HTTP</span><span class=o>/</span><span class=mi>1</span><span class=o>.</span><span class=mi>1</span> <span class=mi>200</span> <span class=no>Ok</span><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=ss>Connection</span><span class=p>:</span> <span class=n>close</span><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=no>Content</span><span class=o>-</span><span class=ss>Length</span><span class=p>:</span> <span class=c1>#{raw_http_body.bytesize}\r</span>
</span></span><span class=line><span class=cl><span class=p>\</span><span class=n>r</span>
</span></span><span class=line><span class=cl><span class=c1>#{raw_http_body}</span>
</span></span><span class=line><span class=cl><span class=no>RESP</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>resp_io</span> <span class=o>=</span> <span class=no>StringIO</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>raw_http_response</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>buf_io</span> <span class=o>=</span> <span class=no>Net</span><span class=o>::</span><span class=no>BufferedIO</span><span class=o>.</span><span class=n>new</span><span class=p>(</span><span class=n>resp_io</span><span class=p>)</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=n>response</span> <span class=o>=</span> <span class=no>Net</span><span class=o>::</span><span class=no>HTTPResponse</span><span class=o>.</span><span class=n>read_new</span><span class=p>(</span><span class=n>buf_io</span><span class=p>)</span>
</span></span><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>reading_body</span><span class=p>(</span><span class=n>buf_io</span><span class=p>,</span> <span class=kp>true</span><span class=p>)</span> <span class=p>{</span> <span class=k>yield</span> <span class=n>res</span> <span class=k>if</span> <span class=nb>block_given?</span> <span class=p>}</span>
</span></span><span class=line><span class=cl><span class=n>response</span><span class=o>.</span><span class=n>uri</span> <span class=o>=</span> <span class=no>URI</span><span class=o>.</span><span class=n>parse</span><span class=p>(</span><span class=s1>&#39;http://example.tld&#39;</span><span class=p>)</span>
</span></span></code></pre></td></tr></table></div></div><p>You now have a valid <code>Net::HTTPResponse</code> object</p></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-tag meta-icon"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2h10l8.59 8.59a2 2 0 010 2.82z"/><line x1="7" y1="7" x2="7" y2="7"/></svg>
<span class=tag><a href=https://stelfox.net/tags/ruby/>ruby</a></span>
<span class=tag><a href=https://stelfox.net/tags/tips/>tips</a></span></p><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=bd9e1ab3269fdee0856f80854c902432ef10f201 target=_blank rel=noopener>bd9e1ab3</a> @ 2024-07-14</p></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>