<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1><a href="https:&#x2F;&#x2F;stelfox.net&#x2F;blog&#x2F;2013&#x2F;backing-up-gmail-with-fetchmail&#x2F;">Backing up Gmail with fetchmail</a></h1>

  <div class="post-content"><p>This morning I found myself in need of a large set of emails to test a
particular set of code. Ideally these emails would be broken out into easily
digestible pieces, and it was strictly for my own personal testing so I wasn't
concerned with using my own live data for this test (There will probably be
another post on this project later on).</p>
<span id="continue-reading"></span>
<p>Having used <code>fetchmail</code> with good results in the past I decided it was a good
idea to take this opportunity to also backup my Gmail account into the common
<code>Maildir</code> format (which essentially breaks out emails into individual files
meeting my requirements).</p>
<p>The first step was to enable POP access to my account through Gmail's
interface. You can accomplish this with the following steps.</p>
<ol>
<li>Login to Gmail</li>
<li>Click on the gear icon</li>
<li>Choose settings</li>
<li>Forwarding and POP/IMAP</li>
<li>Enable POP for all mail</li>
<li>When messages are accessed with POP... Keep&quot;</li>
<li>Save Changes.</li>
</ol>
<p>Ensure you have <code>fetchmail</code> and <code>procmail</code> installed. For me on Fedora this can
be accomplished using yum by running the following commands:</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">sudo yum install fetchmail procmail -y
</code></pre>
<p>We need to configure fetchmail to let it know where to retrieve our mail from.
This configuration file lives at <code>$HOME/.fetchmailrc</code>. By default fetchmail
will send all retrieved mail to the local SMTP server over a normal TCP
connection. This isn't necessary or ideal, rather we'll additionally supply a
local mail delivery agent (procmail) to handle processing the mail into the
Maildir format.</p>
<pre><code>poll pop.gmail.com
protocol pop3
timeout 300
port 995
username "full_email@withdomain.tld" password "yourpassword"
keep
ssl
sslcertck
sslproto TLS1
mda "/usr/bin/procmail -m '/home/<username>/.procmailrc'"
</code></pre>
<p>Be sure to set the permissions on the <code>.fetchmailrc</code> file to 0600:</p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">chmod 0600 $HOME/.fetchmailrc
</code></pre>
<p>We'll now need to configure procmail to properly deliver our mail to the local
<code>Maildir</code> folder. Procmail's configuration by default lives in
<code>$HOME/.procmailrc</code></p>
<pre data-lang="sh" class="language-sh "><code class="language-sh" data-lang="sh">LOGFILE=$HOME/.procmail.log
MAILDIR=$HOME
VERBOSE=on

:0
Maildir/
</code></pre>
<p>With that done, simply run the <code>fetchmail</code> command. In my experience this can
take a while process and it seems like Google limits the number of emails you
can download at a time, so you may need to run the command a couple of times to
get all your emails.</p>
</div><p class="meta">Posted on <span class="postdate">2013-11-19</span></p></article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
