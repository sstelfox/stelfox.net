<!DOCTYPE html>
<html lang='en'><head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='Note: This page is quite old and is likely out of date. My opinions may have also changed dramatically since this was written. It is here as a reference until I get around to updating it.
Qpid is an open source AMQP broker, providing transaction management, queuing, distribution, security, management, clustering, and federation.
 http://wiki.openstack.org/QpidSupport http://www.linuxjournal.com/magazine/advanced-message-queuing-protocol-amqp?page=0,1  Installation Fedora provides a package for qpid called qpid-cpp-server which can be installed like so:'>
<meta name='theme-color' content='#ffcd00'>

<meta property='og:title' content='Qpid • Sam Stelfox&#39;s Thoughts &amp; Notes'>
<meta property='og:description' content='Note: This page is quite old and is likely out of date. My opinions may have also changed dramatically since this was written. It is here as a reference until I get around to updating it.
Qpid is an open source AMQP broker, providing transaction management, queuing, distribution, security, management, clustering, and federation.
 http://wiki.openstack.org/QpidSupport http://www.linuxjournal.com/magazine/advanced-message-queuing-protocol-amqp?page=0,1  Installation Fedora provides a package for qpid called qpid-cpp-server which can be installed like so:'>
<meta property='og:url' content='https://stelfox.net/notes/qpid/'>
<meta property='og:site_name' content='Sam Stelfox&#39;s Thoughts &amp; Notes'>
<meta property='og:type' content='article'><meta property='article:section' content='notes'><meta name='twitter:card' content='summary'>

<meta name="generator" content="Hugo 0.61.0-DEV" />

  <title>Qpid • Sam Stelfox&#39;s Thoughts &amp; Notes</title>
  <link rel='canonical' href='https://stelfox.net/notes/qpid/'>
  
  
  <link rel='icon' href='/favicon.ico'>
<link rel='stylesheet' href='/assets/css/main.ab98e12b.css'><style>
:root{--color-accent:#ffcd00;}
</style>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-32188490-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  

</head>
<body class='page type-notes'>

  <div class='site'><a class='screen-reader-text' href='#content'>Skip to Content</a><div class='main'><nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/'>Home</a>
      </li><li class='item'>
        <a href='/about/'>About</a>
      </li><li class='item'>
        <a href='/blog/'>Blog Posts</a>
      </li><li class='item'>
        <a href='/notes/'>Various Notes</a>
      </li></ul>
  </div>
</nav><div class='header-widgets'>
        <div class='container'></div>
      </div>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>Sam Stelfox&#39;s Thoughts &amp; Notes</p><p class='desc site-desc'>Thoughts from a software engineer, systems architect and Linux gubernāre.</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Qpid</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='0001-01-01T00:00:00Z'>0001, Jan 01</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
7 mins read
</span>


</div>


  </div>
</header>

  
  

  <div class='container entry-content'>
  <p><em><strong>Note: This page is quite old and is likely out of date. My opinions may have
also changed dramatically since this was written. It is here as a reference
until I get around to updating it.</strong></em></p>
<p>Qpid is an open source AMQP broker, providing transaction management, queuing,
distribution, security, management, clustering, and federation.</p>
<ul>
<li><a href="http://wiki.openstack.org/QpidSupport">http://wiki.openstack.org/QpidSupport</a></li>
<li><a href="http://www.linuxjournal.com/magazine/advanced-message-queuing-protocol-amqp?page=0,1">http://www.linuxjournal.com/magazine/advanced-message-queuing-protocol-amqp?page=0,1</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>Fedora provides a package for qpid called <code>qpid-cpp-server</code> which can be
installed like so:</p>
<pre><code>yum install qpid-cpp-server qpid-cpp-server-ssl qpid-cpp-server-store \
  qpid-cpp-server-ha -y
</code></pre><p>Additional packages that may be of use:</p>
<ul>
<li>qpid-tools</li>
<li>qpid-qmf</li>
</ul>
<h2 id="configuration">Configuration</h2>
<p>The following configuration file assumes the rest of the configuration on this
page. You'll want to replace the existing configuration at <code>/etc/qpidd.conf</code>
with the following:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-ini" data-lang="ini"><span style="color:#75715e">##### General Configuration #####</span>

<span style="color:#75715e"># Directory to contain persistent data</span>
<span style="color:#a6e22e">data-dir</span><span style="color:#f92672">=</span><span style="color:#e6db74">/var/lib/qpidd/</span>

<span style="color:#a6e22e">worker-threads</span><span style="color:#f92672">=</span><span style="color:#e6db74">3</span>

<span style="color:#75715e">##### Queue Configuration #####</span>

<span style="color:#75715e"># Set queue events async, used for services like replication</span>
<span style="color:#a6e22e">async-queue-events</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>

<span style="color:#75715e"># How often to attempt purging expired messages from the queues</span>
<span style="color:#a6e22e">queue-purge-interval</span><span style="color:#f92672">=</span><span style="color:#e6db74">600</span>

<span style="color:#75715e"># Default storage limit of any given queue</span>
<span style="color:#a6e22e">default-queue-limit</span><span style="color:#f92672">=</span><span style="color:#e6db74">104857600</span>

<span style="color:#75715e"># The ratio of any specified queue limit at which an event will be raised</span>
<span style="color:#a6e22e">default-event-threshold-ratio</span><span style="color:#f92672">=</span><span style="color:#e6db74">80</span>

<span style="color:#75715e"># Percent of queues maximum capacity at which flow control is activated and</span>
<span style="color:#75715e"># deactivated.</span>
<span style="color:#a6e22e">default-flow-stop-threshold</span><span style="color:#f92672">=</span><span style="color:#e6db74">80</span>
<span style="color:#a6e22e">default-flow-resume-threshold</span><span style="color:#f92672">=</span><span style="color:#e6db74">70</span>

<span style="color:#75715e"># Group identifier to assign to messages delivered to a message group queue that</span>
<span style="color:#75715e"># do not contain an identifier.</span>
<span style="color:#a6e22e">default-message-group</span><span style="color:#f92672">=</span><span style="color:#e6db74">qpid.no-group</span>

<span style="color:#75715e"># Add current time to each received message</span>
<span style="color:#a6e22e">enable-timestamp</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>

<span style="color:#75715e">##### Management Options #####</span>

<span style="color:#75715e"># Enable management, publishing data every 10 seconds, with QMF protocol 1 and</span>
<span style="color:#75715e"># 2</span>
<span style="color:#a6e22e">mgmt-enable</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">mgmt-publish</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">mgmt-pub-interval</span><span style="color:#f92672">=</span><span style="color:#e6db74">10</span>
<span style="color:#a6e22e">mgmt-qmf1</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">mgmt-qmf2</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>

<span style="color:#75715e">##### Networking Configuration #####</span>

<span style="color:#a6e22e">connection-backlog</span><span style="color:#f92672">=</span><span style="color:#e6db74">10</span>

<span style="color:#a6e22e">link-heartbeat-interval</span><span style="color:#f92672">=</span><span style="color:#e6db74">120</span>
<span style="color:#a6e22e">link-maintenace-interval</span><span style="color:#f92672">=</span><span style="color:#e6db74">2</span>

<span style="color:#75715e"># Maximum time a connection can take to send the initial protocol negotiation</span>
<span style="color:#75715e"># (in milliseconds).</span>
<span style="color:#a6e22e">max-negotiate-time</span><span style="color:#f92672">=</span><span style="color:#e6db74">2000</span>

<span style="color:#75715e"># Port to listen on for unencrypted connections</span>
<span style="color:#a6e22e">port</span><span style="color:#f92672">=</span><span style="color:#e6db74">5672</span>

<span style="color:#75715e"># Set TCP_NODELAY on TCP connections</span>
<span style="color:#a6e22e">tcp-nodelay</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>

<span style="color:#75715e">##### Logging Options #####</span>

<span style="color:#a6e22e">log-enable</span><span style="color:#f92672">=</span><span style="color:#e6db74">info+</span>

<span style="color:#a6e22e">log-category</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">log-level</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">log-time</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>

<span style="color:#a6e22e">log-to-stderr</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>
<span style="color:#a6e22e">log-to-stdout</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>
<span style="color:#a6e22e">log-to-syslog</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>

<span style="color:#75715e">##### Persistent Storage Options #####</span>

<span style="color:#75715e"># Number of pages in each journal (1 page is 64Kb)</span>
<span style="color:#a6e22e">jfile-size-pgs</span><span style="color:#f92672">=</span><span style="color:#e6db74">24</span>

<span style="color:#75715e"># Default number of files for each journal instance (queue)</span>
<span style="color:#a6e22e">num-jfiles</span><span style="color:#f92672">=</span><span style="color:#e6db74">8</span>

<span style="color:#a6e22e">truncate</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>

<span style="color:#75715e"># Size of the pages in the write page cache in Kb, allowable values are powers</span>
<span style="color:#75715e"># of 2</span>
<span style="color:#a6e22e">wcache-page-size</span><span style="color:#f92672">=</span><span style="color:#e6db74">32</span>

<span style="color:#75715e">##### Authentication &amp; Authorization Configurations #####</span>

<span style="color:#75715e"># Enable authentication, and configured to use the QPID realm</span>
<span style="color:#a6e22e">auth</span><span style="color:#f92672">=</span><span style="color:#e6db74">yes</span>
<span style="color:#a6e22e">realm</span><span style="color:#f92672">=</span><span style="color:#e6db74">QPID</span>

<span style="color:#75715e"># Get SASL configuration from standard redhat location</span>
<span style="color:#a6e22e">sasl-config</span><span style="color:#f92672">=</span><span style="color:#e6db74">/etc/sasl2/</span>

<span style="color:#75715e"># The policy file to load from, loaded from the data dir</span>
<span style="color:#a6e22e">acl-file</span><span style="color:#f92672">=</span><span style="color:#e6db74">qpid.acl</span>

<span style="color:#75715e"># Maximum combined number of connections allowed (0 is no limit)</span>
<span style="color:#a6e22e">max-connections</span><span style="color:#f92672">=</span><span style="color:#e6db74">500</span>
<span style="color:#a6e22e">max-connections-per-user</span><span style="color:#f92672">=</span><span style="color:#e6db74">0</span>
<span style="color:#a6e22e">max-connections-per-ip</span><span style="color:#f92672">=</span><span style="color:#e6db74">0</span>

<span style="color:#75715e">##### SSL Settings #####</span>

<span style="color:#a6e22e">ssl-port</span><span style="color:#f92672">=</span><span style="color:#e6db74">5671</span>

<span style="color:#75715e"># File containing password to use for accessing the certificate database</span>
<span style="color:#a6e22e">ssl-cert-password-file</span><span style="color:#f92672">=</span><span style="color:#e6db74">/var/lib/qpidd/ssl-db-pass</span>

<span style="color:#75715e"># Where the cert database is stored, the data directory is as good as any</span>
<span style="color:#a6e22e">ssl-cert-db</span><span style="color:#f92672">=</span><span style="color:#e6db74">/var/lib/qpidd</span>

<span style="color:#75715e"># Name of the cerificate to use (usually the hostname)</span>
<span style="color:#a6e22e">ssl-cert-name</span><span style="color:#f92672">=</span><span style="color:#e6db74">agni</span>

<span style="color:#75715e"># Whether or not the server will accept unencrypted connections, there is of</span>
<span style="color:#75715e"># course overhead to encrypted connections and if the only services that will</span>
<span style="color:#75715e"># be talking to it will be the localhost then there is no need to require it...</span>
<span style="color:#75715e"># External connections should of course be encrypted wherever possible.</span>
<span style="color:#a6e22e">require-encryption</span><span style="color:#f92672">=</span><span style="color:#e6db74">no</span>
</code></pre></div><p>You'll want to enable and start the service once the configuration is complete.</p>
<pre><code>systemctl enable qpidd.service
systemctl start qpidd.service
</code></pre><h3 id="enabling-userpass-authentication">Enabling User/Pass Authentication</h3>
<p>By default only ANONYMOUS authentication is enabled which isn't good for any
production systems&hellip; Qpid uses SASL for user authentication and that is how we
need to configure what system to make use of. Open up the file
<code>/etc/sasl2/qpidd.conf</code> and replace it's contents with the following:</p>
<pre><code>auxprop_plugin: sasldb
mech_list: DIGEST-MD5 PLAIN+SSL
pwcheck_method: auxprop
sasldb_path: /var/lib/qpidd/qpidd.sasldb
sql_select: dummy select
</code></pre><h3 id="creating-users">Creating Users</h3>
<p>I've named the SASL authentication realm after the service that uses it, in
this case Qpid (makes sense no?). You'll need to create at least one user to
make use of authentication, I chose to make one user for administration tasks
(admin), and one per server named after the server (in this case the server is
named openstack after the service I mainly use Qpid for).</p>
<p>Create the user's as root:</p>
<pre><code>saslpasswd2 -f /var/lib/qpidd/qpidd.sasldb -u QPID admin
saslpasswd2 -f /var/lib/qpidd/qpidd.sasldb -u QPID openstack
</code></pre><p>Set STRONG passwords for both as arbitrary instructions can be provided to
various openstack services through this service.</p>
<p>The saslpasswd2 command will additionally create the password file, but with
incorrect permissions. Set the ownership and strengthen the permissions like
so:</p>
<pre><code>chown qpidd:qpidd /var/lib/qpidd/qpidd.sasldb
chmod 0640 /var/lib/qpidd/qpidd.sasldb
</code></pre><p>If you have started Qpid with <code>auth=yes</code> configured before creating the account
it will automatically create this file and add a user with the username and
password &lsquo;guest&rsquo;.</p>
<h3 id="listing-users">Listing Users</h3>
<p>You can list all the configured realm / username combinations with the
following command:</p>
<pre><code>sasldblistusers2 -f /var/lib/qpidd/qpidd.sasldb
</code></pre><h3 id="user-acls">User ACLs</h3>
<p>The ACL files are pretty straight-forward and plain text. The file lives at
<code>/var/lib/qpidd/qpid.acl</code> which doesn't exist initially and will need to be
created. This is a solid initial ACL allowing the admin and openstack access to
any permissions they need while preventing anything else.</p>
<p>In the future I'll need to make this more fine-grained. This is more useful
when using Kerberos as the back end which would have more users you wouldn't
want to have access.</p>
<pre><code># Define the admins and let them do whatever they want
group admins admin@Qpid
acl allow admins all all

# Define the server accounts and set their permissions
group servers openstack@Qpid
acl allow servers all all

# Default deny with logging on any other attempts
acl deny-log all all
</code></pre><p>Ensure the ownership and permissions on the file are appropriate:</p>
<pre><code>chown qpidd:qpidd /var/lib/qpidd/qpid.acl
chmod 0640 /var/lib/qpidd/qpid.acl
</code></pre><h4 id="acl-bml-syntax">ACL BML Syntax</h4>
<p>ACLs are case-insensitve, all white space is essentially ignored except when
delimiting between syntax types. Lines can be wrapped by ending the line with a
backslash.</p>
<pre><code>user = username[/domain[@realm]]
user-list = user1 user2 user3 ...
group-name-list = group1 group2 group3 ...

group &lt;group-name&gt; = [user-list] [group-name-list]

permission = [allow|allow-log|deny|deny-log]
action = [consume|publish|create|access|bind|unbind|delete|purge|update]
object = [virtualhost|queue|exchange|broker|link|route|method]
property = [name|durable|owner|routingkey|autodelete|exclusive|
            type|alternate|queuename|schemapackage|schemaclass|
            queuemaxsizelowerlimit|queuemaxsizeupperlimit|
            queuemaxcountlowerlimit|queuemaxcountupperlimit]

acl permission {&lt;group-name&gt;|&lt;user-name&gt;|&quot;all&quot;} {action|&quot;all&quot;} [object|&quot;all&quot; 
            [property=&lt;property-value&gt; ...]]
</code></pre><h4 id="action-listing">Action Listing</h4>
<table>
<thead>
<tr>
<th>Action</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>consume</td>
<td>Applied when subscriptions are created</td>
</tr>
<tr>
<td>publish</td>
<td>Applied on a per message basis on publish message transfers, this rule consumes the most resources</td>
</tr>
<tr>
<td>create</td>
<td>Applied when an object is created, such as bindings, queues, exchanges, links</td>
</tr>
<tr>
<td>access</td>
<td>Applied when an object is read or accessed</td>
</tr>
<tr>
<td>bind</td>
<td>Applied when objects are bound together</td>
</tr>
<tr>
<td>unbind</td>
<td>Applied when objects are unbound</td>
</tr>
<tr>
<td>delete</td>
<td>Applied when objects are deleted</td>
</tr>
<tr>
<td>purge</td>
<td>Similar to delete but the action is performed on more than one object</td>
</tr>
<tr>
<td>update</td>
<td>Applied when an object is updated</td>
</tr>
</tbody>
</table>
<h4 id="object-listing">Object Listing</h4>
<table>
<thead>
<tr>
<th>Object</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>queue</td>
<td>A queue</td>
</tr>
<tr>
<td>exchange</td>
<td>An exchange</td>
</tr>
<tr>
<td>broker</td>
<td>The broker</td>
</tr>
<tr>
<td>link</td>
<td>A federation or inter-broker link</td>
</tr>
<tr>
<td>method</td>
<td>Management or agent or broker method</td>
</tr>
</tbody>
</table>
<h4 id="property-listing">Property Listing</h4>
<table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
<th>Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td>name</td>
<td>String</td>
<td>Object name, such as a queue name or exchange name.</td>
<td></td>
</tr>
<tr>
<td>durable</td>
<td>Boolean</td>
<td>Indicates the object is durable</td>
<td>CREATE QUEUE, CREATE EXCHANGE</td>
</tr>
<tr>
<td>routingkey</td>
<td>String</td>
<td>Specifies routing key</td>
<td>BIND EXCHANGE, UNBIND EXCHANGE, ACCESS EXCHANGE</td>
</tr>
<tr>
<td>autodelete</td>
<td>Boolean</td>
<td>Indicates whether or not the object gets deleted when the connection is closed</td>
<td>CREATE QUEUE</td>
</tr>
<tr>
<td>exclusive</td>
<td>Boolean</td>
<td>Indicates the presence of an exclusive flag</td>
<td>CREATE QUEUE</td>
</tr>
<tr>
<td>type</td>
<td>String</td>
<td>Type of exchange, such as topic, fanout, or xml</td>
<td>CREATE EXCHANGE</td>
</tr>
<tr>
<td>alternate</td>
<td>String</td>
<td>Name of the alternate exchange</td>
<td>CREATE EXCHANGE, CREATE QUEUE</td>
</tr>
<tr>
<td>queuename</td>
<td>String</td>
<td>Name of the queue</td>
<td>ACCESS EXCHANGE</td>
</tr>
<tr>
<td>schemapackage</td>
<td>String</td>
<td>QMF schema package name</td>
<td>ACCESS METHOD</td>
</tr>
<tr>
<td>schemaclass</td>
<td>String</td>
<td>QMF schema class name</td>
<td>ACCESS METHOD</td>
</tr>
<tr>
<td>queuemaxsizelowerlimit</td>
<td>Integer</td>
<td>Minimum value for queue.max_size</td>
<td>CREATE QUEUE</td>
</tr>
<tr>
<td>queuemaxsizeupperlimit</td>
<td>Integer</td>
<td>Maximum value for queue.max_size</td>
<td>CREATE QUEUE</td>
</tr>
<tr>
<td>queuemaxcountlowerlimit</td>
<td>Integer</td>
<td>Minimum value for queue.max_count</td>
<td>CREATE QUEUE</td>
</tr>
<tr>
<td>queuemaxcountupperlimit</td>
<td>Integer</td>
<td>Maximum value for queue.max_count</td>
<td>CREATE QUEUE</td>
</tr>
</tbody>
</table>
<h3 id="ssl">SSL</h3>
<p>Unfortunately SSL for Qpid isn't as easy as generating PEM certificates and
pointing the config at them. Qpid makes use of a Mozilla Network Security
Services database. These databases can be created using certutil.</p>
<p>First we'll need to initialize the database:</p>
<pre><code>certutil -N -d /var/lib/qpidd/
</code></pre><p>Provide a strong password to the database and put a copy in the file
<code>/var/lib/qpidd/ssl-db-pass</code> on it's own with no newline.</p>
<p>I already have PKI in place and a trusted <a href="https://stelfox.net/notes/building-a-certificate-authority/">Certificate Authority</a>, so I
just have to import my trusted certificate authority chain. Generate a
certificate for this server and import it's certificate and chain.</p>
<p>Import the CA cert:</p>
<pre><code>certutil -A -n cert-authority -t &quot;TC,,&quot; -i ca.crt -d /var/lib/qpidd
</code></pre><p>The server certificate is a bit trickier, before we can import an OpenSSL
generated PEM format key set we'll need to convert it to a pkcs12 file, luckily
OpenSSL plays well with others:</p>
<pre><code>openssl pkcs12 -export -out qpid.pfx -inkey qpid.key -in qpid.crt -certfile ca.crt
</code></pre><p>Import the newly generate pkcs12 file, it will firstly ask for the password for
the database, and then the password for the pkcs12 file:</p>
<pre><code>pk12util -d /var/lib/qpidd/ -i qpid.pfx
</code></pre><p>And be sure to clean up after yourself:</p>
<pre><code>rm qpid.pfx
</code></pre><p>Set the permissions on all of the files we just created:</p>
<pre><code>chown qpidd:qpidd /var/lib/qpidd/{cert8.db,key3.db,ssl-db-pass}
chmod 0640 /var/lib/qpidd/{cert8.db,key3.db,ssl-db-pass}
</code></pre><h3 id="firewall">Firewall</h3>
<pre><code># Encrypted Qpid connections (Unencrypted are 5672 but those shouldn't be
# accessed remotely)
-A SERVICE -m tcp -p tcp --dport 5671 -j ACCEPT
</code></pre>
</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'>
  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/notes/redis/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Redis</a>
    </div><div class='next-entry sep-before'>
      <a href='/notes/puppet/'>
        <span class='screen-reader-text'>Next post: </span>Puppet<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>




      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p> &copy; 2011-2020 Sam Stelfox </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__assets_js_src="/assets/js/"</script>

<script src='/assets/js/main.c3bcf2df.js'></script>

</body>

</html>

