<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1>Openstack</h1><div class="post-content"><p>This is a mostly (95%) script-less installation and setup of OpenStack from
scratch on a single host, though done in a way that the services could each be
very easily broken out on to their own machines or multiple machines.</p>
<span id="continue-reading"></span>
<p>A few references that I've used generally for assistance figuring out what I
need:</p>
<ul>
<li><a href="https://fedoraproject.org/wiki/Getting_started_with_OpenStack_on_Fedora_17">Getting started with OpenStack on Fedora 17</a></li>
<li><a href="https://wiki.openstack.org/wiki/QpidSupport">QpidSupport</a></li>
<li><a href="https://github.com/bilelmsekni/OpenStack-Folsom-Install-guide/blob/master/OpenStack_Folsom_Install_Guide_WebVersion.rst">OpenStack Folsom Install Guide</a></li>
<li><a href="https://docs.openstack.org/keystone/latest/">Keystone, the OpenStack Identity Service</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>This guide and all the other OpenStack sections on this wiki were written using
the pre-packaged version of OpenStack that comes with Fedora (version 2012.1.3
Essex) any other version may have different configuration options, and
different command line flags.</p>
<p>The various services should be configured in the order of the sections listed
here.</p>
<h3 id="network-setup">Network Setup</h3>
<p>For the sake of knowing exactly what is going, what connections are being made
and between what services I've elected to put every individual service on it's
own IP address. This separation also makes it easy to break individual services
off on to other machines if they become a bottleneck and need a more
distributed setup.</p>
<p>Since this was initially done on a development machine I also created a bridge
to act as a virtual ethernet adapter that was only available locally named
<code>br-mgmt</code> which also hosts all of the service's. The address range chosen for
this development test was <code>10.100.0.0/24</code> as it generally doesn't interfere
with any networks I normally encounter.</p>
<p>The main bridge was setup using the following configuration file which was
written to <code>/etc/sysconfig/network-scripts/ifcfg-br-mgmt</code>.</p>
<pre><code>NM_CONTROLLED=no
ONBOOT=yes
TYPE=Bridge
BOOTPROTO=static

IPADDR=10.100.0.10
NETMASK=255.255.255.0
NETWORK=10.100.0.0
BROADCAST=10.100.0.255

IPV6INIT=yes
IPV6_PRIVACY=rfc3041

NAME=ManagementNet
</code></pre>
<p>Subsequent IP addresses were added to the bridge by creating files at
<code>/etc/sysconfig/network-scripts/ifcfg-br-mgmt:{id}</code> replacing {id} with 1
through 9 with the following contents:</p>
<pre><code>DEVICE={Interface Name}
NM_CONTROLLED=no
ONBOOT=yes
BOOTPROTO=static

IPADDR={IP Address}
NETMASK=255.255.255.0

IPV6INIT=yes
IPV6_PRIVACY=rfc3041

NAME={Service}
</code></pre>
<p>The following table show the address allocations I used, and what I intend the
address be used for:</p>
<table><thead><tr><th>Interface Name</th><th>IP Address</th><th>Service</th></tr></thead><tbody>
<tr><td>br-mgmt:1</td><td>10.100.0.11</td><td>MySQLd</td></tr>
<tr><td>br-mgmt:2</td><td>10.100.0.12</td><td>Qpidd</td></tr>
<tr><td>br-mgmt:3</td><td>10.100.0.13</td><td>Keystone/Identity</td></tr>
<tr><td>br-mgmt:4</td><td>10.100.0.14</td><td>Memcached</td></tr>
<tr><td>br-mgmt:5</td><td>10.100.0.15</td><td>Nova/Compute</td></tr>
<tr><td>br-mgmt:6</td><td>10.100.0.16</td><td>Cinder/Volume</td></tr>
<tr><td>br-mgmt:7</td><td>10.100.0.17</td><td>Glance/Image</td></tr>
<tr><td>br-mgmt:8</td><td>10.100.0.18</td><td>EC2</td></tr>
<tr><td>br-mgmt:9</td><td>10.100.0.19</td><td>Quantum/Network</td></tr>
</tbody></table>
<h3 id="service-pre-requisites">Service Pre-Requisites</h3>
<p>When configuring the following service be sure to bind them to the address
listed in the table above in the Service/Management network section.</p>
<ul>
<li>Install <a href="https://stelfox.net/notes/mysql/">Mysql Server</a></li>
<li>Install <a href="https://stelfox.net/notes/qpid/">Qpid Message Broker</a></li>
<li>Install <a href="https://stelfox.net/notes/chronyd/">Chrony NTP Server</a></li>
<li>Install <a href="https://stelfox.net/notes/memcached/">Memcache</a></li>
</ul>
<h3 id="keystone-identity">Keystone/Identity</h3>
<p>Keystone is the OpenStack Identity service and it's configuration is documented
on <a href="https://stelfox.net/notes/openstack-keystone/">it's wiki page</a>.</p>
<h3 id="glance-image-service">Glance/Image Service</h3>
<p>Glance is the OpenStack Image service and it's configuration is documented on
<a href="https://stelfox.net/notes/openstack-glance/">it's wiki page</a></p>
</div>
</article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
