<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1>Grub</h1><div class="post-content"><p>Common Linux bootloader.</p>
<span id="continue-reading"></span><h2 id="security">Security</h2>
<h3 id="password-protection">Password Protection</h3>
<p>If left unchecked a malicious user with console access can add or remove kernel
parameters or chain-boot onto another device when booting using grub. You can
prevent this by requiring the user to enter a password to modify the run-time
configuration of grub on boot.</p>
<p>You can use the 'Bootloader Password' option during a CentOS or Fedora install
however it's uses md5 to hash the password which is a known broken scheme.
<code>grub-crypt</code> which comes installed by default on Fedora allows you to use
sha512 to hash the password like so:</p>
<pre><code>[root@localhost ~]# grub-crypt --sha-512
Password:
Retype password:
$6$Um4l/Bido.ySrD.H$uuQjipx3uCu/XwGAfqOQsdIw1m1dphRbUbKOsoT5EpCt4LGi0kGdckDE3SPj2eS3pJ9DCJy3V/TqlqJOjjMvJ1
</code></pre>
<p>Note: Do not use the hash displayed it above, it is not secure (I used
&quot;password&quot;)</p>
<p>You would then add the following line (or replace an existing one) to
<code>/etc/grub.conf</code></p>
<pre><code>password --sha-512 $6$Um4l/Bido.ySrD.H$uuQjipx3uCu/XwGAfqOQsdIw1m1dphRbUbKOsoT5EpCt4LGi0kGdckDE3SPj2eS3pJ9DCJy3V/TqlqJOjjMvJ1
</code></pre>
<h3 id="protect-the-configuration">Protect the Configuration</h3>
<p>Since the grub configuration file has a password hash in it (regardless of the
current state of security of that hash type), as additional information about
the server it should be restricted to only be readable and writeable by root
like so:</p>
<pre><code>[root@localhost ~]# chmod 600 /etc/grub.conf
</code></pre>
</div>
</article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
