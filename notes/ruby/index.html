<!doctype html><html lang=en><head><meta charset=UTF-8><meta http-equiv=X-UA-Compatible content="ie=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=author content><meta name=description content="Note: This page is quite old and is likely out of date. My opinions may have also changed dramatically since this was written. It is here as a reference until I get around to updating it.
RVMIf using Gnome terminal, you have to set the 'Run command as login shell' check box on the Title and Command tab inside of gnome-terminal's Settings page to run the bashrc file upon opening the terminal."><meta name=keywords content="blog,programming,linux,systems,personal,rust,philosophy"><meta name=robots content="noodp"><meta name=theme-color content><link rel=canonical href=https://stelfox.net/notes/ruby/><title>Ruby :: ./Sam_Stelfox.sh â€” A simple place for my collected thoughts and notes.
</title><link rel=stylesheet href=/main.949191c1dcc9c4a887997048b240354e47152016d821198f89448496ba42e491.css integrity="sha256-lJGRwdzJxKiHmXBIskA1TkcVIBbYIRmPiUSElrpC5JE="><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=manifest href=/site.webmanifest><link rel="shortcut icon" href=/favicon.ico><meta itemprop=name content="Ruby"><meta itemprop=description content="Note: This page is quite old and is likely out of date. My opinions may have also changed dramatically since this was written. It is here as a reference until I get around to updating it.
RVMIf using Gnome terminal, you have to set the 'Run command as login shell' check box on the Title and Command tab inside of gnome-terminal's Settings page to run the bashrc file upon opening the terminal."><meta itemprop=datePublished content="2013-01-01T00:00:01+00:00"><meta itemprop=dateModified content="2013-01-01T00:00:01+00:00"><meta itemprop=wordCount content="461"><meta name=twitter:card content="summary"><meta name=twitter:title content="Ruby"><meta name=twitter:description content="Note: This page is quite old and is likely out of date. My opinions may have also changed dramatically since this was written. It is here as a reference until I get around to updating it.
RVMIf using Gnome terminal, you have to set the 'Run command as login shell' check box on the Title and Command tab inside of gnome-terminal's Settings page to run the bashrc file upon opening the terminal."><meta property="article:published_time" content="2013-01-01 00:00:01 +0000 UTC"></head><body><div class=container><header class=header><span class=header__inner><a href=/ style=text-decoration:none><div class=logo><span class=logo__mark>></span>
<span class=logo__text>./Sam_Stelfox.sh</span>
<span class=logo__cursor></span></div></a><span class=header__right><nav class=menu><ul class=menu__inner><li><a href=/about/>About</a></li><li><a href=/notes/>Notes</a></li><li><a href=/blog/>Posts</a></li></ul></nav><span class=menu-trigger><svg viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg></span></span></span></header><div class=content><main class=post><div class=post-info></p></div><article><h2 class=post-title><a href=https://stelfox.net/notes/ruby/>Ruby</a></h2><div class=post-content><p><em><strong>Note: This page is quite old and is likely out of date. My opinions may have
also changed dramatically since this was written. It is here as a reference
until I get around to updating it.</strong></em></p><h2 id=rvm>RVM</h2><p>If using Gnome terminal, you have to set the 'Run command as login shell' check
box on the Title and Command tab inside of gnome-terminal's Settings page to
run the bashrc file upon opening the terminal. If you don't do this you'll
receive "RVM is not a function" error message.</p><p>Install all the packages needed to compile ruby...</p><pre tabindex=0><code>yum install gcc-c++ patch readline readline-devel zlib zlib-devel \
  libyaml-devel libffi-devel openssl-devel make bzip2 autoconf automake \
  libtool bison libxml2 libxml2-devel sqlite sqlite-devel libxslt \
  libxslt-devel -y
</code></pre><p>Install RVM...</p><pre tabindex=0><code>curl https://raw.github.com/wayneeseguin/rvm/master/binscripts/rvm-installer | bash -s stable
</code></pre><pre tabindex=0><code>rvm install ruby-1.9.3
rvm use 1.9.3 --default
</code></pre><p>Create a global gemset:</p><pre tabindex=0><code>rvm gemset create global
rvm gemset use global
</code></pre><p>And install a few gems useful globally:</p><pre tabindex=0><code>gem install bundler pry
</code></pre><p>To make sure these get installed automatically for any other ruby versions that
get installed you can use some nifty information pulled from <a href=https://rvm.io/gemsets/initial/>RVM's
Documentation</a>.</p><pre tabindex=0><code>echo -e &#34;bundler\npry&#34; &gt; ~/.rvm/gemsets/global.gems
</code></pre><h3 id=ruby-optimization>Ruby Optimization</h3><p>By default RVM compiles ruby with no optimization flags. The flags will
increase the time it takes to compile a specific instance of Ruby, however, it
will also save running time with every execution of the code. For me this is a
very useful trade off as I run various Ruby commands hundreds of times a day
when I'm working on various programs. You can add the compilization flags by
creating an ".rvmrc" file in the root of your home directory and include the
following:</p><pre tabindex=0><code>rvm_configure_env=(CFLAGS=&#34;-march=native -O2 -pipe&#34;)
</code></pre><p>These are "safe" optimization flags and will make optimizations automatically
based on the processor of the system that compiled it. This has the downside of
making the binaries non-portable (as in you can only move the compiled binaries
to systems with the same or newer processors).</p><p>As an additional level of optimizations rather than using the stock Ruby binary
you can use the "turbo" branch with the falcon patch which has decreased rails
load time by half or more. You install this version like so:</p><pre tabindex=0><code>rvm install 1.9.3-turbo --patch falcon
</code></pre><p>If you encounter any errors about CFlags or compilation errors your RVM is
probably out of date and needs to be updated. On one machine I received the
following error:</p><pre tabindex=0><code>Error running &#39;CFLAGS=-march=native -O2 ./configure
--prefix=/home/user/.rvm/rubies/ruby-1.9.3-p194-turbo --enable-shared
--disable-install-doc --with-libyaml --with-opt-dir=/home/user/.rvm/usr &#39;,
please read /home/user/.rvm/log/ruby-1.9.3-p194-turbo/configure.logThere has
been an error while running configure. Halting the installation.
</code></pre><p>Which was quickly solved by running the following command and trying again:</p><pre tabindex=0><code>rvm get stable
</code></pre><p>I did also encounter an error when that ran for me, but it fixed the issue and
I suspect the error was unrelated.</p><h2 id=rbenv>RBEnv</h2><p><a href=http://hmarr.com/2012/nov/08/rubies-and-bundles/>http://hmarr.com/2012/nov/08/rubies-and-bundles/</a></p></div></article><hr><div class=post-info><p><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-git-commit"><circle cx="12" cy="12" r="4"/><line x1="1.05" y1="12" x2="7" y2="12"/><line x1="17.01" y1="12" x2="22.96" y2="12"/></svg><a href=e0ae306a5897bc6892dbaa3e409f62aac8e8d735 target=_blank rel=noopener>e0ae306a</a> @ 2024-07-15</p></div></main></div><footer class=footer></footer></div><script type=text/javascript src=/bundle.min.e89fda0f29b95d33f6f4224dd9e5cf69d84aff3818be2b0d73e731689cc374261b016d17d46f8381962fb4a1577ba3017b1f23509d894f6e66431f988c00889e.js integrity="sha512-6J/aDym5XTP29CJN2eXPadhK/zgYvisNc+cxaJzDdCYbAW0X1G+DgZYvtKFXe6MBex8jUJ2JT25mQx+YjACIng=="></script></body></html>