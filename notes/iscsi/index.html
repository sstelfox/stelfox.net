<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1>iSCSI</h1><div class="post-content"><p>This is the client configuration for iSCSI, please refer to <a href="https://stelfox.net/notes/iscsid/">iSCSId</a> for the
server portion.</p>
<h2 id="configuration">Configuration</h2>
<p>yum install iscsi-initiator-utils -y</p>
<pre><code>iscsid.startup = /etc/rc.d/init.d/iscsid force-start
node.startup = automatic

node.session.auth.authmethod = CHAP
node.session.auth.username = client1
node.session.auth.password = XXXXXXXXXXXX

discovery.sendtargets.auth.authmethod = CHAP
discovery.sendtargets.auth.username = client1
discovery.sendtargets.auth.password = XXXXXXXXXXXX

node.conn[0].timeo.login_timeout = 10
node.conn[0].timeo.logout_timeout = 10
node.conn[0].timeo.noop_out_interval = 5
node.conn[0].timeo.noop_out_timeout = 5

node.session.cmds_max = 128
node.session.err_timeo.abort_timeout = 15
node.session.err_timeo.lu_reset_timeout = 30
node.session.err_timeo.tgt_reset_timeout = 30
node.session.initial_login_retry_max = 5
node.session.timeo.replacement_timeout = 120
node.session.queue_depth = 32
node.session.xmit_thread_priority = -20

#node.session.iscsi.InitialR2T = Yes
node.session.iscsi.InitialR2T = No

#node.session.iscsi.ImmediateData = No
node.session.iscsi.ImmediateData = Yes

node.session.iscsi.FirstBurstLength = 262144
node.session.iscsi.MaxBurstLength = 16776192
node.conn[0].iscsi.MaxRecvDataSegmentLength = 262144
node.conn[0].iscsi.MaxXmitDataSegmentLength = 0
discovery.sendtargets.iscsi.MaxRecvDataSegmentLength = 32768

#node.conn[0].iscsi.HeaderDigest = CRC32C,None
node.conn[0].iscsi.HeaderDigest = None

node.session.iscsi.FastAbort = Yes
</code></pre>
<pre><code>[root@localhost ~]# chkconfig iscsi on
[root@localhost ~]# chkconfig iscsid on
[root@localhost ~]# service iscsi start
[root@localhost ~]# service iscsid start
[root@localhost ~]# iscsiadm --mode discovery --type sendtargets --portal <service_ip>
</code></pre>
</div>
</article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
