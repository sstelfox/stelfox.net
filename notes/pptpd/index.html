<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, viewport-fit=cover">

    <title>Sam Stelfox&#x27;s Thoughts &amp; Notes</title>
    <link rel="stylesheet" href="https://stelfox.net/colors-dark.css">

    

    
    
  </head>
  <body>
    <header id="header">
      <h1><a href="https:&#x2F;&#x2F;stelfox.net">Sam Stelfox&#x27;s Thoughts &amp; Notes</a></h1>
      <p>Thought&#x27;s from a software engineer, systems architect, and Linux gubernƒÅre.</p>
    </header>
    <div id="page">
      <div id="sidebar">
        
          
          <nav>
            <ul class="nav">
              
                
                  <li>
                    <a href="&#x2F;"><span>Home</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;about&#x2F;"><span>About</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;blog&#x2F;"><span>Blog</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;projects&#x2F;"><span>Projects</span></a>
                  </li>
                
                  <li>
                    <a href="&#x2F;notes&#x2F;"><span>Various Notes</span></a>
                  </li>
                
              
            </ul>
          </nav>
          
        
      </div>
      <div id="content">
        
<article class="post">
  <h1>PPtP</h1><p class="meta">Posted on <span class="postdate">2019-06-05</span></p><div class="post-content"><p>I never got this working there was some kind of authentication issue between
the client and server but there are almost not diagnostic messages here. Old
software doesn't feel good.</p>
<span id="continue-reading"></span><h2 id="server">Server</h2>
<p>Was done on Gentoo.</p>
<pre><code>emerge net-vpn/pptpd

cat << 'EOF' > /etc/pptpd.conf
# /etc/pptpd.conf

option /etc/ppp/options.pptpd
logwtmp

# 10.202.254.128
localip 172.16.45.5
remoteip 172.16.45.100-200
EOF

cat << 'EOF' > /etc/ppp/options.pptpd
name pptpd

refuse-pap
refuse-chap
refuse-mschap

require-mschap-v2
require-mppe-128

ms-dns 1.1.1.1
ms-dns 1.0.0.1

#proxyarp

lock
nobsdcomp
novj
novjccomp
nologfd

# May not be valid / needed
noipx
mtu 1490
mru 1490
EOF

cat << 'EOF' > /etc/ppp/chap-secrets
# /etc/ppp/chap-secrets
# Secrets for authentication using CHAP

# client    server    password          IP addresses
test-user   *         test-password     *
EOF

sysctl -w net.ipv4.ip_forward=1
</code></pre>
<h2 id="client">Client</h2>
<p>This was on Fedora 29</p>
<pre><code>dnf install pptp -y

cat << 'EOF' > /etc/ppp/chap-secrets
# /etc/ppp/chap-secrets

# client    server    password          IP addresses
test-user   *         test-password     *
EOF

cat << 'EOF' > /etc/ppp/peers/test-connection
pty "pptp 10.202.254.128 --nolaunchpppd"
name test-user
remotename PPTP
require-mppe-128
file /etc/ppp/options.pptp
ipparam test-connection
EOF

pppd call test-connection
tail -f /var/log/messages
</code></pre>
</div>
</article>

      </div>
      <footer id="footer">
        <p class="copyright">
          
          &copy; 2011 &ndash; 2021 Sam Stelfox | <a href="https://stelfox.net/licenses/">Site Content Licenses</a>
          
        </p>
      </footer>
    </div>
  </body>
</html>
